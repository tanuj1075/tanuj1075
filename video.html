<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
  button {
    padding: 10px 15px;
    margin: 5px;
    cursor: pointer;
  }
  video {
    display: block;
    margin-bottom: 20px;
  }
</style>
<body>
    <video id="video" width="640" controls muted>
        <source src="Tokyo Revengers - Episode 01 [Hindi dub]   Muse IN.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <div>
        <button onclick="switchAudio('hin')">Hindi Audio</button>
        <button onclick="switchAudio('jp')">Japanese Audio</button>
        <button onclick="switchAudio('none')">No Audio</button>
    </div>

    <audio id="audioHin" preload="auto">
        <source src="hind.mp3" type="audio/mpeg">
    </audio>
    <audio id="audioJap" preload="auto">
        <source src="jap.mp3" type="audio/mpeg">
    </audio>

    <script>
        const video = document.getElementById("video");
        const hinAudio = document.getElementById("audioHin");
        const jpAudio = document.getElementById("audioJap");
        
        // Mute the video by default
        video.muted = true;
        let currentAudio = hinAudio;
        let isPlaying = false;

        // Initialize - play Hindi audio by default if video is playing
        video.addEventListener('loadeddata', () => {
            hinAudio.currentTime = video.currentTime;
            jpAudio.currentTime = video.currentTime;
        });

        // Sync audio with video playback
        video.addEventListener("play", () => {
            isPlaying = true;
            if (currentAudio) {
                currentAudio.currentTime = video.currentTime;
                currentAudio.play().catch(e => console.log("Audio play failed:", e));
            }
        });

        video.addEventListener("pause", () => {
            isPlaying = false;
            if (currentAudio) {
                currentAudio.pause();
            }
        });

        video.addEventListener("seeking", () => {
            if (currentAudio) {
                currentAudio.currentTime = video.currentTime;
            }
        });

        video.addEventListener("timeupdate", () => {
            if (isPlaying && currentAudio && Math.abs(video.currentTime - currentAudio.currentTime) > 0.1) {
                currentAudio.currentTime = video.currentTime;
            }
        });

        // Switch audio function
        function switchAudio(lang) {
            // Pause current audio
            if (currentAudio) {
                currentAudio.pause();
            }
            
            // Set new audio based on selection
            if (lang === "hin") {
                currentAudio = hinAudio;
            } else if (lang === "jp") {
                currentAudio = jpAudio;
            } else {
                currentAudio = null; // No audio
                return;
            }
            
            // Sync with video
            if (currentAudio) {
                currentAudio.currentTime = video.currentTime;
                
                // Play if video is playing
                if (!video.paused && !video.ended) {
                    currentAudio.play().catch(e => console.log("Audio play failed:", e));
                }
            }
        }

        // Optional: Add event listeners for better sync
        hinAudio.addEventListener('loadedmetadata', () => {
            console.log("Hindi audio loaded, duration:", hinAudio.duration);
        });
        
        jpAudio.addEventListener('loadedmetadata', () => {
            console.log("Japanese audio loaded, duration:", jpAudio.duration);
        });

        // Ensure video stays muted even if user tries to unmute
        video.addEventListener('volumechange', () => {
            video.muted = true;
        });
    </script>
</body>
</html>